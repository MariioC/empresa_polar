(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["empleados"],{"8b51":function(t,a,s){"use strict";s("d49d")},a434:function(t,a,s){"use strict";var e=s("23e7"),r=s("23cb"),o=s("a691"),i=s("50c4"),n=s("7b0b"),c=s("65f0"),u=s("8418"),l=s("1dde"),d=l("splice"),f=Math.max,h=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!d},{splice:function(t,a){var s,e,l,d,m,v,_=n(this),w=i(_.length),g=r(t,w),C=arguments.length;if(0===C?s=e=0:1===C?(s=0,e=w-g):(s=C-2,e=h(f(o(a),0),w-g)),w+s-e>p)throw TypeError(b);for(l=c(_,e),d=0;d<e;d++)m=g+d,m in _&&u(l,d,_[m]);if(l.length=e,s<e){for(d=g;d<w-e;d++)m=d+e,v=d+s,m in _?_[v]=_[m]:delete _[v];for(d=w;d>w-e+s;d--)delete _[d-1]}else if(s>e)for(d=w-e;d>g;d--)m=d+e-1,v=d+s-1,m in _?_[v]=_[m]:delete _[v];for(d=0;d<s;d++)_[d+g]=arguments[d+2];return _.length=w-e+s,l}})},c740:function(t,a,s){"use strict";var e=s("23e7"),r=s("b727").findIndex,o=s("44d2"),i="findIndex",n=!0;i in[]&&Array(1)[i]((function(){n=!1})),e({target:"Array",proto:!0,forced:n},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},d49d:function(t,a,s){},d5c2:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"usuarios animated fadeIn fast"},[s("h1",{staticClass:"text-center"},[t._v("Empleados")]),s("p",{staticClass:"text-center px-3 mt-3"},[t._v(" A continuación, puede gestionar todos los usuarios registrados en la empresa, registrar usuarios, actualizar información de usuarios, eliminar usuarios y ver las retroalimentaciones de cada usuario. ")]),s("div",{staticClass:"row mb-4"},[s("h3",{staticClass:"text-center"},[t._v("Busqueda de usuarios")]),s("div",{staticClass:"row col-md-5 col-10 mx-auto justify-content-center"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingrese: Nombre, Usuario, Documento o Dependencia"},domProps:{value:t.query},on:{keyup:t.delayBuscarUsuarios,input:function(a){a.target.composing||(t.query=a.target.value)}}}),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.buscarUsuarios}},[t._v("Buscar")])])])]),s("hr",{staticClass:"divider"}),s("div",[s("button",{staticClass:"btn btn-lg btn-success d-block mx-auto my-2",attrs:{type:"button"},on:{click:function(a){return t.modalUsuario(null)}}},[s("i",{staticClass:"fas fa-user mx-1"}),t._v(" Crear Usuario ")]),s("h3",{staticClass:"text-center my-3"},[t._v("Usuarios / Empleados")]),s("button",{staticClass:"btn btn-primary btn-sm mb-2 d-block mx-auto hint--bottom",attrs:{type:"button","aria-label":"Cargar usuarios"},on:{click:t.obtenerUsuarios}},[s("i",{staticClass:"fas fa-sync-alt mx-1"}),t._v(" Cargar")]),s("div",{staticClass:"row overflow-auto"},[s("table",{staticClass:"table table-hover table-striped table-responsive text-center"},[t._m(0),s("tbody",[t.usuarios&&t.usuarios.length?t._l(t.usuarios,(function(a,e){return s("tr",{key:e},[s("td",{attrs:{scope:"row"}},[t._v(t._s(a.info_personal.nombres))]),s("td",[t._v(t._s(a.info_personal.documento))]),a.info_laboral?s("td",[t._v(t._s(a.info_laboral.nombre_dependencia))]):s("td",{staticClass:"text-danger"},[t._v("Sin asignar")]),a.info_laboral?s("td",[t._v(t._s(a.info_laboral.nombre_cargo))]):s("td",{staticClass:"text-danger"},[t._v("Sin asignar")]),a.info_laboral?s("td",[t._v("$"+t._s(a.info_laboral.salario))]):s("td",{staticClass:"text-danger"},[t._v("$0")]),s("td",[s("button",{staticClass:"btn btn-primary hint--left",attrs:{type:"button","aria-label":"Editar usuario"},on:{click:function(s){return t.modalUsuario(a.info_personal.id_usuario)}}},[s("i",{staticClass:"fas fa-pencil-alt"})])]),s("td",[s("button",{staticClass:"btn btn-danger hint--left",attrs:{type:"button","aria-label":"Eliminar usuario"},on:{click:function(s){t.alertaEliminarUsuario(a.info_personal.id_usuario)}}},[s("i",{staticClass:"fas fa-trash"})])]),s("td",[s("button",{staticClass:"btn btn-info hint--left",attrs:{type:"button","aria-label":"Cambiar contraseña de usuario"},on:{click:function(s){t.modalPassword(a.info_personal.id_usuario)}}},[s("i",{staticClass:"fas fa-lock"})])]),s("td",[s("RouterLink",{staticClass:"btn btn-success hint--left",attrs:{to:{name:"Retroalimentacion",params:{id_usuario:a.info_personal.id_usuario}},type:"button","aria-label":"Ver retroalimentaciones del usuario"}},[s("i",{staticClass:"fas fa-comments mx-1"}),t._v(" Retroalimentaciones ")])],1)])})):[s("tr",[t.query?s("td",{staticClass:"text-center fw-bolder text-danger",attrs:{colspan:"9"}},[t._v("No se ha encontrado nigún usuario")]):s("td",{staticClass:"text-center fw-bolder text-danger",attrs:{colspan:"9"}},[t._v("Aún no hay usuarios registrados")])])]],2)])])])])},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Nombre")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Documento")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Dependencia")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Cargo")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Salario")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Editar")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Eliminar")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Contraseña")]),s("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[t._v("Retroalimentaciones")])])])}],o=s("1da1"),i=(s("c740"),s("a434"),s("96cf"),s("e7b7")),n={name:"Empleados",data:function(){return{query:null,timer:null}},computed:{usuarios:function(){return this.$store.state.usuarios.usuarios}},created:function(){this.usuarios.length||this.obtenerUsuarios()},methods:{obtenerUsuarios:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.query=null,t.$store.dispatch("showLoading"),a.prev=2,a.next=5,Object(i["h"])();case 5:s=a.sent,t.$store.dispatch("hideLoading"),s.error?t.$store.dispatch("showError",s.error):t.$store.dispatch("setUsuarios",s.usuarios),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),t.$store.dispatch("showError"),console.error(a.t0);case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},delayBuscarUsuarios:function(){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){t.buscarUsuarios()}),800)},buscarUsuarios:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.query){a.next=17;break}if(!(t.query.length>2)){a.next=15;break}return t.$store.dispatch("showLoading"),a.prev=3,a.next=6,Object(i["c"])(t.query);case 6:s=a.sent,t.$store.dispatch("hideLoading"),s.error?t.$store.dispatch("showError",s.error):t.$store.dispatch("setUsuarios",s.resultados),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](3),t.$store.dispatch("showError"),console.error(a.t0);case 15:a.next=18;break;case 17:t.obtenerUsuarios();case 18:case"end":return a.stop()}}),a,null,[[3,11]])})))()},modalUsuario:function(t){this.$store.dispatch("showModal",{show_modal:"ModalUsuario",id_edicion:t})},modalPassword:function(t){this.$store.dispatch("showModal",{show_modal:"ModalPassword",id_edicion:t})},alertaEliminarUsuario:function(t){var a=this;this.$swal.fire({title:"¿Seguro que desea eliminar el usuario?",text:"Se eliminará el usuario y toda la información relacionada a él",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0}).then((function(s){s.isConfirmed&&a.eliminarUsuario(t)}))},eliminarUsuario:function(t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var e,r,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.$store.dispatch("showLoading"),s.prev=1,s.next=4,Object(i["e"])(t);case 4:e=s.sent,a.$store.dispatch("hideLoading"),e.error?a.$store.dispatch("showError",e.error):(r=JSON.parse(JSON.stringify(a.usuarios)),o=r.findIndex((function(a){return a.info_personal.id_usuario==t})),r.splice(o,1),a.$store.dispatch("setUsuarios",r),a.$store.dispatch("showSuccess",e.mensaje)),s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](1),a.$store.dispatch("showError"),console.error(s.t0);case 13:case"end":return s.stop()}}),s,null,[[1,9]])})))()}}},c=n,u=(s("8b51"),s("2877")),l=Object(u["a"])(c,e,r,!1,null,"9c013014",null);a["default"]=l.exports}}]);
//# sourceMappingURL=empleados.28102ebc.js.map