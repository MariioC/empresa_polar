(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ModalDependencia"],{"0483":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return d}));var a=r("1da1"),n=(r("96cf"),r("d3b7"),r("99af"),r("c3e4")),o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n["a"],"dependencias/"),{method:"POST",headers:Object(n["b"])(),body:t});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n["a"],"dependencias/"),{method:"PUT",headers:Object(n["b"])(),body:t});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n["a"],"dependencias/").concat(t),{method:"DELETE",headers:Object(n["b"])()});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n["a"],"dependencias/cargo/").concat(t),{method:"DELETE",headers:Object(n["b"])()});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n["a"],"dependencias/"),{headers:Object(n["b"])()});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},"69cb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("h3",{staticClass:"modal-title"},[e._v("Dependencia")]),r("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:e.cerrar}},[r("span",{attrs:{"aria-hidden":"true"}})])]),r("div",{staticClass:"modal-body"},[r("form",{staticClass:"mt-3 info_personal"},[r("fieldset",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-label mb-0",attrs:{for:"dependencia"}},[e._v("Nombre dependencia")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dependencia.nombre_dependencia,expression:"dependencia.nombre_dependencia"}],staticClass:"form-control",attrs:{type:"text",id:"dependencia",placeholder:"Nombre dependencia"},domProps:{value:e.dependencia.nombre_dependencia},on:{input:function(t){t.target.composing||e.$set(e.dependencia,"nombre_dependencia",t.target.value)}}})]),r("div",{staticClass:"form-group mt-3 "},[e.agregar_cargo?r("button",{staticClass:"btn btn-danger mx-auto d-block mb-2",attrs:{type:"button"},on:{click:e.mostrarFormCargo}},[e._v("Cerrar cargos")]):r("button",{staticClass:"btn btn-info mx-auto d-block mb-2",attrs:{type:"button"},on:{click:e.mostrarFormCargo}},[e._v("Agregar cargos")]),r("form",{staticClass:"border border-1 border-muted p-4 animated fadeIn",class:{"d-none":!e.agregar_cargo}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"form-label mb-0",attrs:{for:"cargo"}},[e._v("Nombre cargo")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.cargo.nombre_cargo,expression:"cargo.nombre_cargo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nombre del cargo"},domProps:{value:e.cargo.nombre_cargo},on:{input:function(t){t.target.composing||e.$set(e.cargo,"nombre_cargo",t.target.value)}}})]),r("div",{staticClass:"form-group mt-3"},[r("label",{staticClass:"form-label mb-0",attrs:{for:"salario"}},[e._v("Salario")]),r("div",{staticClass:"input-group"},[r("span",{staticClass:"input-group-text"},[e._v("$")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.cargo.salario,expression:"cargo.salario"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Salario"},domProps:{value:e.cargo.salario},on:{input:function(t){t.target.composing||e.$set(e.cargo,"salario",t.target.value)}}})])]),e.cargo.id_cargo?r("button",{staticClass:"btn btn-success mx-auto d-block mt-3",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.actualizarCargo.apply(null,arguments)}}},[e._v("Actualizar cargo")]):r("button",{staticClass:"btn btn-success mx-auto d-block mt-3",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.agregarCargo.apply(null,arguments)}}},[e._v("Agregar")])]),r("legend",{staticClass:"text-center fw-bolder mt-3"},[e._v("Cargos")])]),r("div",{staticClass:"form-group mt-3"},[r("table",{staticClass:"table table-hover table-striped table-responsive text-center"},[e._m(0),r("tbody",[e.cargos.length?e._l(e.cargos,(function(t,a){return r("tr",{key:a},[r("td",{attrs:{scope:"row"}},[e._v(e._s(t.nombre_cargo))]),r("td",[e._v(e._s(t.salario))]),t.id_cargo?r("td",[r("button",{staticClass:"btn btn-primary hint--top",attrs:{type:"button","aria-label":"Editar cargo"},on:{click:function(r){return e.editarCargo(t.id_cargo)}}},[r("i",{staticClass:"fas fa-pencil-alt"})])]):r("td"),t.id_cargo?r("td",[r("button",{staticClass:"btn btn-danger hint--top",attrs:{type:"button","aria-label":"Eliminar cargo"},on:{click:function(r){return e.alertaEliminarCargo(t.id_cargo)}}},[r("i",{staticClass:"fas fa-trash"})])]):r("td",[r("button",{staticClass:"btn btn-info hint--top",attrs:{type:"button","aria-label":"Eliminar cargo"},on:{click:function(r){return e.quitarCargo(t.nombre_cargo)}}},[r("i",{staticClass:"fas fa-trash"})])])])})):[e._m(1)]],2)])])])])]),r("div",{staticClass:"modal-footer"},[e.id_edicion&&e.edicion_dependencia?r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.actualizarDependencia}},[e._v("Actualizar depencia")]):r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.crearDependencia}},[e._v("Crear depencia")]),r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cancelar")])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[e._v("Cargo")]),r("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[e._v("Salario")]),r("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[e._v("Editar")]),r("th",{staticClass:"fw-bold",attrs:{scope:"col"}},[e._v("Eliminar")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{staticClass:"text-center text-danger fw-bold",attrs:{colspan:"4"}},[e._v("Aún no se han agregado cargos")])])}],o=r("1da1"),s=(r("96cf"),r("4de4"),r("c740"),r("a434"),r("0483")),c={name:"ModalDependencia",data:function(){return{agregar_cargo:!1,dependencia:{nombre_dependencia:null},cargos:[],cargo:{nombre_cargo:null,salario:null}}},computed:{id_edicion:function(){return this.$store.state.modal.id_edicion},dependencias:function(){return!!this.id_edicion&&this.$store.state.dependencias.dependencias},edicion_dependencia:function(){var e=this;return!(!this.dependencias||!this.id_edicion)&&this.dependencias.filter((function(t){return t.dependencia.id_dependencia==e.id_edicion}))[0]}},created:function(){this.id_edicion&&this.edicion_dependencia&&(this.dependencia=JSON.parse(JSON.stringify(this.edicion_dependencia.dependencia)),this.cargos=JSON.parse(JSON.stringify(this.edicion_dependencia.cargos)))},methods:{mostrarFormCargo:function(){this.agregar_cargo=!this.agregar_cargo},agregarCargo:function(){this.cargo.nombre_cargo&&this.cargo.salario?(this.cargos.unshift(this.cargo),this.cargo={nombre_cargo:null,salario:null}):this.$store.dispatch("showError","Debe completar todos los campos para agregar un cargo")},quitarCargo:function(e){this.cargos=this.cargos.filter((function(t){return t.nombre_cargo!=e}))},crearDependencia:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("showLoading"),r={dependencia:e.dependencia,cargos:e.cargos},t.prev=2,t.next=5,Object(s["b"])(JSON.stringify(r));case 5:a=t.sent,e.$store.dispatch("hideLoading"),a.error?e.$store.dispatch("showError",a.error):(n=JSON.parse(JSON.stringify(e.$store.state.dependencias.dependencias)),n.unshift(a.dependencia),e.$store.dispatch("showSuccess",a.mensaje),e.$store.dispatch("setDependencias",n),e.cerrar()),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$store.dispatch("showError"),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},actualizarDependencia:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("showLoading"),r={dependencia:e.dependencia,cargos:e.cargos},t.prev=2,t.next=5,Object(s["a"])(JSON.stringify(r));case 5:a=t.sent,e.$store.dispatch("hideLoading"),a.error?e.$store.dispatch("showError",a.error):(n=a.dependencia.dependencia,o=JSON.parse(JSON.stringify(e.$store.state.dependencias.dependencias)),o[o.findIndex((function(e){return e.dependencia.id_dependencia==n.id_dependencia}))]=a.dependencia,e.$store.dispatch("showSuccess",a.mensaje),e.$store.dispatch("setDependencias",o),e.cerrar()),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$store.dispatch("showError"),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},editarCargo:function(e){this.agregar_cargo=!0,this.cargo=this.cargos.filter((function(t){return t.id_cargo==e}))[0]},actualizarCargo:function(){this.cargo={nombre_cargo:null,salario:null}},alertaEliminarCargo:function(e){var t=this;this.$swal.fire({title:"¿Eliminar cargo?",text:"Se eliminará el cargo deseado en esta dependencia",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0}).then((function(r){r.isConfirmed&&t.eliminarCargo(e)}))},eliminarCargo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("showLoading"),r.prev=1,r.next=4,Object(s["c"])(e);case 4:a=r.sent,t.$store.dispatch("hideLoading"),a.error?t.$store.dispatch("showError",a.error):(n=JSON.parse(JSON.stringify(t.cargos)),o=n.findIndex((function(t){return t.id_cargo==e})),n.splice(o,1),t.cargos=n,t.$store.dispatch("showSuccess",a.mensaje)),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](1),t.$store.dispatch("showError"),console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},cerrar:function(){this.$store.dispatch("closeModal")}}},i=c,d=r("2877"),u=Object(d["a"])(i,a,n,!1,null,null,null);t["default"]=u.exports},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),s=r("50c4"),c=r("7b0b"),i=r("65f0"),d=r("8418"),u=r("1dde"),l=u("splice"),p=Math.max,g=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var r,a,u,l,b,m,v=c(this),_=s(v.length),C=n(e,_),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=_-C):(r=w-2,a=g(p(o(t),0),_-C)),_+r-a>f)throw TypeError(h);for(u=i(v,a),l=0;l<a;l++)b=C+l,b in v&&d(u,l,v[b]);if(u.length=a,r<a){for(l=C;l<_-a;l++)b=l+a,m=l+r,b in v?v[m]=v[b]:delete v[m];for(l=_;l>_-a+r;l--)delete v[l-1]}else if(r>a)for(l=_-a;l>C;l--)b=l+a-1,m=l+r-1,b in v?v[m]=v[b]:delete v[m];for(l=0;l<r;l++)v[l+C]=arguments[l+2];return v.length=_-a+r,u}})},c740:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,o=r("44d2"),s="findIndex",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)}}]);
//# sourceMappingURL=ModalDependencia.34a13882.js.map